$(document).ready(function(){function n(n,o,t){new Date;$(".new-comment").replaceWith('<div class="alert alert-success">Thanks for your comment!</div>'),$.ajax({type:"POST",url:"../inc/log-comment.php",dataType:"json",data:{comment:o,name:n,identifier:t}})}function o(){$(".alert-error").remove(),$(".new-comment").append("<div class='alert alert-error'>* Please enter your name and a comment.</div>")}function t(n,o){newComment=$(".comment:eq(0)").clone(),newComment.find(".comment-name").text(n),newComment.find(".comment-time").text("Now"),o=o.replace(/(?:\r\n|\r|\n)/g,"<br />"),newComment.find(".comment-content").html(o),newComment.hide().appendTo(".comments").fadeIn()}$("#submit-comment").click(function(e){var c=$("#commenter-name").val(),a=$("#commenter-comment").val(),s=$("#comment-identifier").val(),i=$("#user-ip").attr("data-ip");c.length>0&&a.length>0?(n(c,a,s),t(c,a),ga("send","event","Comments","Add Comment",i)):(o(),ga("send","event","Comments","Add Comment Error",i)),e.preventDefault()})}),$(document).ready(function(){function process_accordion(n){n.button.hasClass("accordion--closed")?(accordionOpen(n.button),addCloseIcon(n)):(accordionClosed(n.button),removeCloseIcon(n))}function addCloseIcon(n){n.replaceButton===!0?n.button.html(svgClose()):n.closeLocation.append(svgClose())}function removeCloseIcon(n){n.replaceButton===!0?n.button.html(n.content):n.closeLocation.children().remove()}function moveToBtn(n){var o=n.button[0].getBoundingClientRect().top;-20<o&&o<100||scrollBy(0,o-10)}function svgClose(){return'<svg class="icon icon--close"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg>'}function accordionClosed(n){n.addClass("accordion--closed"),n.removeClass("accordion--open")}function accordionOpen(n){n.removeClass("accordion--closed"),n.addClass("accordion--open")}var closedElements=["footnote","byline","author"];$(".byline__category").after('<button id="bylineBtn" id="bylineBtn" class="byline__button">Learn More</button>'),$(".byline__content").append('<button data-btn-id="bylineBtn" class="accordion__second-close">'+svgClose()+" Close Section</button>"),$(".author__content").append('<button data-btn-id="authorBtn" class="accordion__second-close">'+svgClose()+" Close Section</button>");for(var i=0;i<closedElements.length;i++)$("."+closedElements[i]+"__button").length&&($("."+closedElements[i]+"__button").addClass("accordion--closed").addClass("accordion__button"),$("."+closedElements[i]+"__content").addClass("accordion__content"));var authorBtn={button:$(".author__button"),replaceButton:!1,closeLocation:$(".author__name"),content:""},bylineBtn={button:$(".byline__button"),replaceButton:!0,closeLocation:$(".byline__button"),content:"Learn More"},footnoteBtn={button:"",replaceButton:!0,closeLocation:"",content:""};$(".footnote__button").click(function(n){n.preventDefault();var o=$(this).data("footnote-id");footnoteBtn={button:$(this),replaceButton:!0,content:"<sup>"+o+"</sup>",closeLocation:$(this)},process_accordion(footnoteBtn)}),$(document).on("click",".accordion__button",function(e){e.preventDefault();var btnId=$(this).attr("id");btn=eval(btnId),process_accordion(btn)}),$(document).on("click",".accordion__second-close",function(e){e.preventDefault();var btnId=$(this).data("btn-id");btn=eval(btnId),process_accordion(btn),moveToBtn(btn)}),$(".comments-section").length&&$(".comments-section").hide(),$(".show-comments").click(function(n){n.preventDefault(),$(".show-comments-wrap").remove(),$(".comments-section").fadeIn();var o=$("#user-ip").attr("data-ip");ga("send","event","Comments","Show Comments",o)})});